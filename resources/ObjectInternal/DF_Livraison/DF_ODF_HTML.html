<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <title>ODF DEFILIPPIS</title>
    
    <style>
	html, body, div, span, applet, object, iframe,
	h1, h2, h3, h4, h5, h6, p, blockquote, pre,
	a, abbr, acronym, address, big, cite, code,
	del, dfn, em, img, ins, kbd, q, s, samp,
	small, strike, strong, sub, sup, tt, var,
	b, u, i, center,
	dl, dt, dd, ol, ul, li,
	fieldset, form, label, legend,
	table, caption, tbody, tfoot, thead, tr, th, td,
	article, aside, canvas, details, embed,
	figure, figcaption, footer, header, hgroup,
	menu, nav, output, ruby, section, summary,
	time, mark, audio, video {
		margin: 0;
		padding: 0;
		border: 0;
	}
		
	html {
		font-size: 11px;
		font-family:Arial, sans-serif;
	}
	
	body {
		line-height: 1;
	}
	
    .bl-box {
		max-width: 100%;
        margin: auto;
        line-height: 18px;
        font-family: 'Helvetica Neue', 'Helvetica', Helvetica, Arial, sans-serif;
        color: #555;
    }
    .bl-box table {
        width: 100%;
        line-height: inherit;
        text-align: left;
    }
    .bl-box table td {
        padding: 5px;
        vertical-align: top;
    }
    
    
	
	.tg  {
		border-collapse:collapse;
		border-spacing:0px !important;
		page-break-inside:auto;   
	}
	.tg tr {
		page-break-inside:avoid;
		page-break-after:auto      	
	}
	.tg td {
		padding:5px 5px;
		border-style:solid;
		border-width:1px !important;
		overflow:hidden;
		word-break:normal;
		border-color:#222;
		background-color:white;
	}
	.tg th{
		font-weight:bold;
		padding:5px 5px;
		border-style:solid;
		border-width:1px;
		overflow:hidden;
		word-break:normal;
		border-color:#222;
		
	}
	
	.tg .tg-ul38{
		text-align:center;
		vertical-align:top;
		position:sticky;
		will-change:transform;
		color:#fff !important;
	}

	.tg .thnumbl {
				
	}	
	.tg .thref {
		width:80px;
		
	}
	.tg .thtype {
		
	}
	.tg .thdesignation {
		min-width:280px;
	}
	.tg .thunite {
	
	}
	.tg .thquantite {
	
	}
	.tg .thprixu {
		width:85px;
	}
	.tg .thprixt {
		width:100px;
	}	

	
	.tg td.ref {
		text-align:center;
	}
	.tg td.type {
		text-align:center;
	}
	.tg td.designation {
		text-align:left;
	}
	.tg td.unite {
		text-align:center;
	}
	.tg td.quantite {
		text-align:center;
	}
	.tg td.prixu {
		text-align:right;
	}
	.tg td.prixt {
		text-align:right;
	}
	
	tfoot {
		xbackground-color:#ccc;
		display: table-row-group;
	}	
	
	tfoot td.vide {
		background-color:#A6C4E0;
	}

	tfoot td.totallibelle {
		background-color:#A6C4E0;
		text-align:left;
		font-weight:bold;
	}
	tfoot td.totalvaleur {
		background-color:#A6C4E0;
		text-align:right;
		font-weight:bold;
	}	
	
	tfoot td.totalttclibelle{
		background-color:#A6C4E0;
		text-align:left;
		font-weight:bold;	
	}
	tfoot td.totalttcvaleur {
		background-color:#A6C4E0;
		text-align:right;
		font-weight:bold;
	}
	tfoot td.tvalibelle{
		background-color:#A6C4E0;
		text-align:left;
		font-weight:bold;
	}
	tfoot td.tvavaleur {
		background-color:#A6C4E0;
		text-align:right;
		font-weight:bold;
	}

	tfoot ul {		
		margin: 0 15px;
		padding: 5px;
	}	
	tfoot ul li {
		list-style: square;
		margin: 0;
		padding: 0;
	}

	/** saut de page **/
	div.breakafter {
	  page-break-after: always;
	}
	
	
	/** CGV **/
    .cgv-box {
        margin: auto;
        padding: 10px;
        border: 1px solid #eee;
        box-shadow: 0 0 10px rgba(0, 0, 0, .15);
        font-size: 9px;
        line-height: 14px;
        font-family: 'Helvetica Neue', 'Helvetica', Helvetica, Arial, sans-serif;
        color: #555;
    }
    .cgv-box table {
        width: 100%;
        line-height: inherit;
        text-align: left;
    }
    .cgv-box table td {
        padding: 5px;
        vertical-align: top;
    }  
	td.cgvleft {
		width:50%;
	}
	
	
	h1, h2 {
		color:#004C8E;
		line-height:normal;
	}	
	h1 {
		margin:15px 0 5px 0;
	}
	h2 {
		margin:10px 0 20px 0;
	}
	h3 {
		text-align:center;
	}
	h4 {
		margin:8px 0 0 0;
	}
	
	p.cordialement {
		margin:20px 10px;
		text-align:right;
	}
	
	.signature {
		width:50% !important;	
		margin: 25px 0 auto auto;
		text-align:left;
		vertical-align:top;
		border:solid 1px black;
		height:150px;
		page-break-inside: avoid;
	}
	.signature_span {
		font-weight:bold;
	}	
	
	div.coordclient {		
		font-size:13px;
	}	
	
	.cleanbreak {
		page-break-inside:avoid;
		page-break-after:auto 	
	}		
	
	</style>	
	<script>
		function fPrix(nombre){
		  nombre = nombre.toFixed(2);		
		  nombre += '';
		  var sep = '&nbsp;';
		  var reg = /(\d+)(\d{3})/;
		  while( reg.test( nombre)) {
			nombre = nombre.replace( reg, '$1' +sep +'$2');
		  }
		  /*return nombre;*/
		  document.write(nombre+"&nbsp;&euro;");
		}
		function fval(chaine){
			
			if(chaine=="null"){
				document.write("");
			}
			else {
				document.write(chaine);
			}	
		}		
		function fFormatDate(date){ // au format 2020-07-04
			var dateFormat = "";
			
			var annee = date.substring(0, 4);
			var mois = date.substring(5, 7);
			var jour = date.substring(8, 10);
			
			dateFormat = jour+"/"+mois+"/"+annee;
			
			document.write(dateFormat); // au format 04/07/2020
		}				
	</script>	
</head>

<body>

	<!--<div class="header">
	
	</div>-->

    <div class="bl-box">
        <table cellpadding="0" cellspacing="0" border="0">
            <tr class="top">
                <td colspan="2">
				
                    <table>
						<tr>
							<td class="title" colspan="2" style="font-size: 8px;line-height: 14px;color: #333;">
								<img src="https://nsm09.casimages.com/img/2020/06/02//20060207455325239716829796.png" style="height:45px;float:left;margin-right:15px">
										
                                175 Avenue des Frères Lumière.<br/>
								FRANCE - 69726 Genay<br/>
                                Tél : 04 78 98 15 49 / www.mineralconseil.fr<br/>
								SAS - RCS LYON 612 029 298 - FR 29 612 029 298<br/>
												
								<hr style="border:solid 1px #eee;margin-bottom:20px">
							</td>
						</tr>					
                        <tr>
							<td>
								<strong>Suiveur Affaire : </strong>{{#cl}}{{DF_Commande_DF_utilisateur_interne_id__defiUsrNC}}{{/cl}}<br/>
								{{#usr}}
								<strong>Tel : </strong>{{usr_cell_num}}<br/>
								<strong>Email : </strong>{{usr_email}}<br/>
								{{/usr}}
							</td>
                            <td style="text-align:right">
								<div class="coordclient">
									<strong>Client </strong>: {{#cl}}{{DF_Commande_DF_Client_id__defiClientNom}}{{/cl}}<br/>
									<strong>Contact </strong>: {{#cl}}{{DF_Commande_DF_Contact_id__defiContactPrenom}} {{DF_Commande_DF_Contact_id__defiContactNom}}{{/cl}}<br/>
									<strong>Email </strong>: {{#cl}}{{DF_Commande_DF_Contact_id__defiContactEmail}}{{/cl}}<br/>	
								</div>
								<br/>
								<strong>N° BL associé(s)<strong> : {{#bl}} <script>fval("{{defiLivraisonNumBL}}");</script>, {{/bl}}<br/>
								<strong>N° OTP : {{#cl}}{{DF_Commande_DF_Affaire_id__defiAfrNumero}}{{/cl}}
								<br/>
                            </td>                            
                        </tr>
						<tr>
							<td colspan="2" style="vertical-align:bottom;text-align:center">
								<h1>{{#cl}}{{DF_Commande_DF_Affaire_id__defiAfrLibelleChantier}} - {{DF_Commande_DF_Affaire_id__defiAfrLieuAffaire}}{{/cl}}</h1>
								<h2>ORDRE DE FACTURATION du 
									<script>
										var now = new Date();
										var jour = ('0'+now.getDate()).slice(-2);
										var mois= ('0'+(now.getMonth()+1)).slice(-2);
										document.write(jour+"/"+mois+"/"+now.getFullYear());
									</script>
								</h2>
							</td>
						</tr>
                    </table>
                    
                    
                </td>
            </tr>            
        </table>
            
         <table class="tg">
			<thead>
				<tr style="background-color:#004C8E">
					<th class="tg-ul38 thnumbl">N°&nbsp;de&nbsp;BL</th>
					<th class="tg-ul38 thref">Ref</th>
				    <th class="tg-ul38 thdesignation">Désignation</th>
				    <th class="tg-ul38 thunite">Unité</th>
				    <th class="tg-ul38 thquantite">Qté</th>
				    <th class="tg-ul38 thprixu">P.U. HT<br></th>
				    <th class="tg-ul38 thprixt">TOTAL €</th>					
				</tr>
			</thead>
			
			<tbody>
				{{#rows_l}}
				<tr>
					<td class="ref"><script>fval("{{DF_Quantite_DF_Livraison_id__defiLivraisonNumBL}}");</script></td> 
					<td class="ref">{{defiQuantiteRefProduit}}</td>
					<td class="designation">{{DF_Quantite_DF_ligne_commande_id__defiLigneCommandeDesignation}}</td>
					<td class="unite">{{DF_Quantite_DF_ligne_commande_id__defiLigneCommandeUnite}}</td>
					<td class="quantite">{{defiQuantiteQte}}</td>
					<td class="prixu"><script>fPrix({{DF_Quantite_DF_ligne_commande_id__defiLigneCommandePrixEXWUnitaire}});</script></td>
					<td class="prixt"><script>fPrix({{defiQuantiteMontant}});</script></td>
				</tr>
				{{/rows_l}}
				
			</tbody>
			
			<tfoot>
				<tr class="footer">
					<td class="vide" rowspan="3" colspan="5" >
						
					</td>				
					<td class="totallibelle">
						TOTAL HT
					</td>
					<td class="totalvaleur">{{#total_ht}}<script>fPrix({{total_ht_l}});</script>{{/total_ht}}</td>
				</tr>		
				<tr>
					<td class="tvalibelle">TVA 20,00%</td>
					<td class="tvavaleur"> {{#tva}}<script>fPrix({{prix_tva}});</script>{{/tva}}</td>
				</tr>
				<tr>
					<td class="totalttclibelle">TOTAL TTC</td>
					<td class="totalttcvaleur">{{#total_ttc}}<script>fPrix({{total_ttc_l}});</script>{{/total_ttc}}</td>					
				</tr>				
			</tfoot>
			
		</table>
	<!--<table class="signature">
		<tr>
			<td>
				<span class="signature_span">VISA DE LA COMPTABILITE </span>
			</td>
		</tr>	
	</table>
	
	<br/>	
	<table class="signature">
		<tr>
			<td>
				<span class="signature_span">NOM DU CONDUCTEUR DE TRAVAUX ET VISA</span>
			</td>
		</tr>	
	</table>-->
	
	
 </div>


</body>
</html>